<?xml version="1.0" encoding="UTF-8"?>
<launch>

  <arg name="bag_file" default="/home/lkulik/Datasets/lidar_aligned/lidar_align_outdoors_gps_2.bag"/>
  <arg name="transforms_from_csv" default="false"/>

  <node pkg="lidar_align" name="lidar_align" type="lidar_align_node" output="screen">
    <param name="input_bag_path" value="$(arg bag_file)" />
    <param name="output_pointcloud_path" value="$(find lidar_align)/results/$(anon lidar_points).ply" />
    <param name="output_calibration_path" value="$(find lidar_align)/results/$(anon calibration).txt" />

    <param name="local" value="true"/>
    <param name="keep_points_ratio" value="0.01"/>
    <param name="max_point_distance" value="100"/>
    <param name="max_time_offset" value="0.2"/>

    <!-- <param name="inital_guess" value="[0.46, -0.022, 0.076, 0.785, 0.0, 0.00, 0.010]"/> -->
    <!-- Initial guess doesn't get passed properly - currently hardcoded in the header file !-->
    <param name="translational_range" value="1"/>
    <param name="angular_range" value="1"/>

    <param name="clockwise_lidar" value="true"/>
    <param name="estimate_point_times" value="true"/>

    <param name="max_evals" value="400"/>

  </node>
</launch>